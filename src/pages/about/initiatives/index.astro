---
import PageLayout from "@layouts/PageLayout.astro";
import { getCollection } from "astro:content";
import InitiativeCard from "@components/initiatives/InitiativeCard.astro";
import type { CollectionEntry } from "astro:content";

const allInitiatives = await getCollection("initiatives");

const sortByName = (
  a: CollectionEntry<"initiatives">,
  b: CollectionEntry<"initiatives">
) => a.data.name.localeCompare(b.data.name);
---

<style lang="scss">
  .initiative-grid {
    display: grid;
    grid-template-columns: repeat(1, 1fr);
    row-gap: 40px;
    width: 800px;
    z-index: 2;
  }
</style>
<PageLayout>
  <h1 class="gradient-title">Initiatives</h1>
  <section class="initiative-grid">
    {
      allInitiatives
        .sort(sortByName)
        .map((initiative) => (
          <InitiativeCard
            name={initiative.data.name}
            image={initiative.data.image}
            body={initiative.body}
          />
        ))
    }
  </section>
</PageLayout>
